<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title> Chat Application </title>
		
		<!-- Bootstrap core CSS -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.5/sandstone/bootstrap.min.css" rel="stylesheet">

		<style>
			#message_form {
				bottom: 0;
				position: fixed;
			}
		</style>

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="container">
			<table class="table table-striped table-hover">
				<thead>
					<tr>
						<th class="col-lg-2 col-md-2 col-sm-2"> Name </th>
						<th class="col-lg-10 col-md-10 col-sm-10"> Message </th>
					</tr>
				</thead>
				<tbody id="messages"></tbody>
			</table>
		</div>

		<form id="message_form">
			<div class="input-group">
      			<input type="text" class="form-control" id="message_button" autocomplete="off"/>
      			<span class="input-group-btn">
      				<button type="submit" class="btn btn-primary"> Send </button>
      			</span>
      		</div>
		</form>

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" crossorigin="anonymous"></script>

		<!-- Include javascript for server connection -->
		<script src="/socket.io/socket.io.js"></script>
		<script>
			var person = prompt("Please enter your name");		
			var socket = io();
			$('form').submit(function(e){
				e.preventDefault();
				socket.emit('chat message', {user_name: person, user_msg: $('#message_button').val()});
				$('#message_button').val('');
				return false;
			});

			socket.on('chat message', function(data){
				$('#messages').append('<tr><td> ' + data.user_name + ' </td><td>' + data.user_msg + '</td></tr>');
			});
		</script>
	</body>
</html>